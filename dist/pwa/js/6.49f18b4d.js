(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{6028:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"lista-atividade"},[e("q-page",{attrs:{padding:""}},[e("q-table",{attrs:{title:"Lista de Atividades",data:t.atividades,columns:t.columns,"row-key":"id","hide-bottom":"","rows-per-page-options":[],pagination:t.pagination,loading:t.loading},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"loading",fn:function(){return[e("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"body-cell-descricao",fn:function(a){return e("q-td",{attrs:{props:a}},[t._v("\n        "+t._s(a.row.descricao.length>40?a.row.descricao.substring(0,40)+"...":a.row.descricao)+"\n      ")])}},{key:"body-cell-id",fn:function(t){return e("q-td",{attrs:{props:t}},[e("q-icon",{attrs:{name:"event_note",size:"1.5rem",color:"gray"}})],1)}},{key:"body-cell-cliente",fn:function(a){return e("q-td",{attrs:{props:a}},[t._v("\n        "+t._s(a.row.cliente.nome)+"\n      ")])}},{key:"body-cell-status",fn:function(a){return e("q-td",{attrs:{props:a}},[e("q-badge",{attrs:{color:t.getColorStatus(a.row.status),dark:""}},[t._v(t._s(a.row.status))])],1)}},{key:"body-cell-faturado",fn:function(a){return e("q-td",{attrs:{props:a}},[e("q-badge",{attrs:{color:"Sim"===a.row.faturado?"green":"red",dark:""}},[t._v(t._s(a.row.faturado))])],1)}},{key:"body-cell-action",fn:function(a){return e("q-td",{attrs:{props:a}},[t.isAdmin||t.isCoordenador?e("q-btn",{attrs:{color:"primary",flat:"",icon:"edit"},on:{click:function(e){return t.edit(a.row)}}}):t._e(),t.isAdmin||t.isCoordenador?e("q-btn",{attrs:{color:"red",flat:"",icon:"delete"},on:{click:function(e){return t.showModalDelete(a.row)}}}):t._e(),e("q-btn",{attrs:{color:"grey",flat:"",placeholder:"Detalhes da atividade",icon:"chat"},on:{click:function(e){return t.editDetalhe(a.row)}}})],1)}}])},[t._v("\n      I\n\n      "),t._v("\n\n      I\n      ")]),e("paginacao",{attrs:{last_page:t.lastPage,current_page:t.currentPage},on:{input:function(a){return t.load(a)}}}),e("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,18]}},[e("q-btn",{attrs:{fab:"",icon:"add",color:"primary"},on:{click:function(a){t.showModal=!0}}})],1)],1),e("modal-cadastro",{attrs:{edit:t.editarAtividade,show:t.showModal},on:{fechar:t.fecharModal,salvar:function(a){return t.onSubmit(a)}}}),e("modal-detalhe",{attrs:{edit:t.editarAtividade,show:t.showModalDetalhe},on:{fechar:t.fecharModal,salvar:function(a){return t.onSubmit(a)}}}),e("modal-delete",{attrs:{dialog:t.showDeleteModal,item:t.editarAtividade},on:{fechar:function(a){t.showDeleteModal=!1},deletar:function(a){return t.deletar(a)}}}),e("footer-component")],1)},n=[],r=(e("8e6e"),e("8a81"),e("ac6a"),e("cadf"),e("06db"),e("456d"),e("386d"),e("967e")),o=e.n(r),s=(e("96cf"),e("fa84")),d=e.n(s),l=e("c47a"),c=e.n(l),u=e("9989"),f=e("eaac"),p=e("de5e"),v=e("74f7"),h=e("2f62"),m=e("f699"),b=function(t){return t?"R$ ".concat(t.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})):t},g=(e("28a5"),e("f3e3")),w=e.n(g),y=function(t){if(t){var a=t.split("-"),e=w()(a,3),i=e[0],n=e[1],r=e[2];return"".concat(r,"/").concat(n,"/").concat(i)}},k=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-cadastro-atividade"},[e("q-dialog",{attrs:{value:t.show},on:{input:t.fechar}},[e("q-card",{staticStyle:{width:"700px","max-width":"100vw"}},[e("q-card-section",{staticClass:"bg-orange text-white"},[e("div",{staticClass:"text-h6"},[t._v("Cadastro Atividade")])]),e("q-card-section",[e("q-form",[e("div",{staticClass:"q-gutter-md"},[e("q-input",{attrs:{outlined:"",type:"date","fill-mask":"",label:"Data Inicio"},model:{value:t.atividade.datacadastro,callback:function(a){t.$set(t.atividade,"datacadastro",a)},expression:"atividade.datacadastro"}}),e("q-input",{attrs:{outlined:"",type:"date","fill-mask":"",label:"Data Final Prevista"},model:{value:t.atividade.datafinalprevista,callback:function(a){t.$set(t.atividade,"datafinalprevista",a)},expression:"atividade.datafinalprevista"}}),e("q-input",{attrs:{outlined:"",type:"date","fill-mask":"",label:"Data Final"},model:{value:t.atividade.datafinal,callback:function(a){t.$set(t.atividade,"datafinal",a)},expression:"atividade.datafinal"}}),e("q-input",{attrs:{outlined:"",label:"Descricao"},model:{value:t.atividade.descricao,callback:function(a){t.$set(t.atividade,"descricao",a)},expression:"atividade.descricao"}}),e("q-select",{attrs:{filled:"",options:t.impostos,label:"Impostos"},model:{value:t.atividade.imposto,callback:function(a){t.$set(t.atividade,"imposto",a)},expression:"atividade.imposto"}}),e("q-input",{attrs:{outlined:"",label:"Saving"},model:{value:t.atividade.saving,callback:function(a){t.$set(t.atividade,"saving",a)},expression:"atividade.saving"}}),e("q-input",{attrs:{outlined:"",label:"Honorario"},model:{value:t.atividade.honorario,callback:function(a){t.$set(t.atividade,"honorario",a)},expression:"atividade.honorario"}}),e("q-select",{attrs:{"emit-value":"","map-options":"",filled:"",options:t.clientes,label:"Clientes"},model:{value:t.atividade.cliente_id,callback:function(a){t.$set(t.atividade,"cliente_id",a)},expression:"atividade.cliente_id"}}),e("q-select",{attrs:{filled:"",options:t.faturado,label:"Faturado"},model:{value:t.atividade.faturado,callback:function(a){t.$set(t.atividade,"faturado",a)},expression:"atividade.faturado"}}),e("q-select",{attrs:{filled:"",options:t.status,label:"Status"},model:{value:t.atividade.status,callback:function(a){t.$set(t.atividade,"status",a)},expression:"atividade.status"}}),e("q-select",{attrs:{"emit-value":"","map-options":"",filled:"",options:t.users,label:"Responsável"},model:{value:t.atividade.user_id,callback:function(a){t.$set(t.atividade,"user_id",a)},expression:"atividade.user_id"}}),e("q-input",{attrs:{outlined:"",type:"textarea",label:"Observações"},model:{value:t.atividade.obs,callback:function(a){t.$set(t.atividade,"obs",a)},expression:"atividade.obs"}})],1)])],1),e("q-card-actions",{staticClass:"bg-white text-teal",attrs:{align:"right"}},[e("q-btn",{staticClass:"q-mt-md",attrs:{color:"grey",label:"Fechar"},on:{click:t.fechar}}),e("q-btn",{staticClass:"q-mt-md",attrs:{label:"Salvar",type:"submit",color:"primary"},on:{click:t.salvar}})],1)],1)],1)],1)},O=[],q=(e("7f7f"),e("24e8")),S=e("0378"),x=e("21fa"),D=e("bac0");function P(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,i)}return e}function _(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?P(Object(e),!0).forEach((function(a){c()(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):P(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var C={name:"ModalCadastroAtividade",components:{QDialog:q["a"],QForm:S["a"]},props:["show","edit"],data:function(){return{clientes:[],users:[],ClienteService:new x["a"],UserService:new D["a"],impostos:["IRPJ/CSLL","PIS/COFINS","INSS","ISS","Outros"],faturado:["Sim","Não","N/A"],status:["Iniciado","Não Iniciado","Em andamento","Concluido"],atividade:{}}},methods:{salvar:function(){this.$emit("salvar",this.atividade)},fechar:function(){this.$emit("fechar")},loadClientes:function(){var t=d()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.ClienteService.list();case 2:a=t.sent,this.clientes=a.data.map((function(t){return{label:t.nome,value:t.id}}));case 4:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}(),loadUsers:function(){var t=d()(o.a.mark((function t(){var a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.UserService.list();case 2:a=t.sent,this.users=a.data.map((function(t){return{label:t.name,value:t.id}}));case 4:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}()},mounted:function(){this.loadClientes(),this.loadUsers()},watch:{edit:function(t){this.atividade=_({},t)}}},j=C,M=e("2877"),Q=e("eebe"),A=e.n(Q),I=e("f09f"),$=e("a370"),F=e("27f9"),E=e("ddd8"),L=e("4b7e"),N=e("9c40"),U=Object(M["a"])(j,k,O,!1,null,null,null),R=U.exports;A()(U,"components",{QDialog:q["a"],QCard:I["a"],QCardSection:$["a"],QForm:S["a"],QInput:F["a"],QSelect:E["a"],QCardActions:L["a"],QBtn:N["a"]});var B=e("a27d"),J=e("4c03"),T=e("b83f"),H=e("f0e1");function z(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,i)}return e}function G(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?z(Object(e),!0).forEach((function(a){c()(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):z(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}var K={name:"ListaAtividade",computed:G({},Object(h["b"])("user",["nomeUser","isAdmin","isCoordenador"])),components:{QPage:u["a"],QTable:f["a"],QPageSticky:p["a"],ModalCadastro:R,ModalDelete:T["a"],ModalDetalhe:B["default"],Paginacao:H["a"],QInnerLoading:v["a"],FooterComponent:J["a"]},data:function(){return{loading:!1,currentPage:0,lastPage:0,showDeleteModal:!1,AtividadeService:new m["a"],showModal:!1,showModalDetalhe:!1,editarAtividade:{},atividades:[],colors:{"Em andamento":function(){return"amber"},"Não Iniciado":function(){return"red"},Iniciado:function(){return"primary"},default:function(){return"green"}},columns:[{name:"id",style:"min-width: 15px; width: 15px",label:"",field:"id",align:"left"},{name:"datacadastro",label:"Data Inicio",field:"datacadastro",align:"center",format:function(t){return y(t)}},{name:"datafinalprevista",label:"Data Prevista",field:"datafinalprevista",align:"center",format:function(t){return y(t)}},{name:"datafinal",label:"Data Final",field:"datafinal",align:"center",format:function(t){return y(t)}},{name:"descricao",style:"min-width: 150px; width: 150px",label:"Descrição",field:"descricao",align:"left"},{name:"status",label:"Status",field:"status",align:"center"},{name:"imposto",label:"Imposto",field:"imposto",align:"center"},{name:"saving",label:"Saving",field:"saving",align:"center",format:function(t){return b(t)}},{name:"honorario",label:"Honorario",field:"honorario",align:"center",format:function(t){return b(t)}},{name:"cliente",label:"Responsável",field:"cliente",align:"center"},{name:"faturado",label:"Faturado",field:"faturado",align:"center"},{name:"action",label:"Opções",field:"action",align:"center"}],pagination:{page:1,rowsPerPage:0}}},methods:{getColorStatus:function(t){return(this.colors[t]||this.colors.default)()},edit:function(t){this.editarAtividade=G({},t),this.showModal=!0},editDetalhe:function(t){this.editarAtividade=G({},t),this.showModalDetalhe=!0},onSubmit:function(){var t=d()(o.a.mark((function t(a){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.AtividadeService.createOrUpdate(a);case 2:this.load(),this.fecharModal();case 4:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}(),load:function(){var t=d()(o.a.mark((function t(a){var e;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.AtividadeService.search({},a);case 3:e=t.sent,this.loading=!1,this.lastPage=e.last_page,this.currentPage=e.current_page,this.atividades=e.data;case 8:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}(),fecharModal:function(){this.showModal=!1,this.showModalDetalhe=!1,this.editarAtividade={}},showModalDelete:function(t){this.editarAtividade=t,this.showDeleteModal=!0},deletar:function(){var t=d()(o.a.mark((function t(a){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.AtividadeService.remove(a.id);case 2:this.showDeleteModal=!1,this.load();case 4:case"end":return t.stop()}}),t,this)})));function a(a){return t.apply(this,arguments)}return a}()},mounted:function(){this.load()}},V=K,W=e("db86"),X=e("0016"),Y=e("58a8"),Z=Object(M["a"])(V,i,n,!1,null,null,null);a["default"]=Z.exports;A()(Z,"components",{QPage:u["a"],QTable:f["a"],QInnerLoading:v["a"],QTd:W["a"],QIcon:X["a"],QBadge:Y["a"],QBtn:N["a"],QPageSticky:p["a"]})}}]);